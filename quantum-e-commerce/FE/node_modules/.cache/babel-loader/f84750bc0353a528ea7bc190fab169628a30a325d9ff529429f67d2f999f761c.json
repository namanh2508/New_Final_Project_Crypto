{"ast":null,"code":"import _objectSpread from\"D:/BaitapUIT/Mat_Ma_Hoc/new_final_project_clone/quantum-e-commerce/FE/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import ProductCard from'./ProductCard';import ProductSkeleton from'./ProductSkeleton';import Pagination from'../Common/Pagination';import productService from'../../services/productService';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ProductList=_ref=>{let{title=\"Sản phẩm\",filters={},showFilters=true,itemsPerPage=20}=_ref;const[products,setProducts]=useState([]);const[loading,setLoading]=useState(true);const[currentPage,setCurrentPage]=useState(1);const[totalPages,setTotalPages]=useState(1);const[sortBy,setSortBy]=useState('');useEffect(()=>{fetchProducts();},[filters,currentPage,sortBy]);const fetchProducts=async()=>{try{setLoading(true);const params=_objectSpread(_objectSpread({},filters),{},{page:currentPage,page_size:itemsPerPage,ordering:sortBy});const response=await productService.getProducts(params);if(response.success){setProducts(response.data.results||response.data);setTotalPages(Math.ceil((response.data.count||response.data.length)/itemsPerPage));}}catch(error){toast.error('Không thể tải danh sách sản phẩm');}finally{setLoading(false);}};const handleSortChange=newSort=>{setSortBy(newSort);setCurrentPage(1);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4\",children:[...Array(itemsPerPage)].map((_,index)=>/*#__PURE__*/_jsx(ProductSkeleton,{},index))});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-800\",children:title}),showFilters&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"S\\u1EAFp x\\u1EBFp theo:\"}),/*#__PURE__*/_jsxs(\"select\",{value:sortBy,onChange:e=>handleSortChange(e.target.value),className:\"border border-gray-300 rounded px-3 py-1 text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Li\\xEAn quan\"}),/*#__PURE__*/_jsx(\"option\",{value:\"-created_at\",children:\"M\\u1EDBi nh\\u1EA5t\"}),/*#__PURE__*/_jsx(\"option\",{value:\"price\",children:\"Gi\\xE1 th\\u1EA5p \\u0111\\u1EBFn cao\"}),/*#__PURE__*/_jsx(\"option\",{value:\"-price\",children:\"Gi\\xE1 cao \\u0111\\u1EBFn th\\u1EA5p\"}),/*#__PURE__*/_jsx(\"option\",{value:\"-rating\",children:\"\\u0110\\xE1nh gi\\xE1 cao nh\\u1EA5t\"}),/*#__PURE__*/_jsx(\"option\",{value:\"-sold_count\",children:\"B\\xE1n ch\\u1EA1y nh\\u1EA5t\"})]})]})]}),products.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4 mb-8\",children:products.map(product=>/*#__PURE__*/_jsx(ProductCard,{product:product},product.id))}),totalPages>1&&/*#__PURE__*/_jsx(Pagination,{currentPage:currentPage,totalPages:totalPages,onPageChange:setCurrentPage})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-lg mb-2\",children:\"Kh\\xF4ng t\\xECm th\\u1EA5y s\\u1EA3n ph\\u1EA9m n\\xE0o\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 text-sm\",children:\"Th\\u1EED thay \\u0111\\u1ED5i b\\u1ED9 l\\u1ECDc ho\\u1EB7c t\\u1EEB kh\\xF3a t\\xECm ki\\u1EBFm\"})]})]});};export default ProductList;","map":{"version":3,"names":["React","useState","useEffect","ProductCard","ProductSkeleton","Pagination","productService","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProductList","_ref","title","filters","showFilters","itemsPerPage","products","setProducts","loading","setLoading","currentPage","setCurrentPage","totalPages","setTotalPages","sortBy","setSortBy","fetchProducts","params","_objectSpread","page","page_size","ordering","response","getProducts","success","data","results","Math","ceil","count","length","error","handleSortChange","newSort","className","children","Array","map","_","index","value","onChange","e","target","product","id","onPageChange"],"sources":["D:/BaitapUIT/Mat_Ma_Hoc/new_final_project_clone/quantum-e-commerce/FE/src/components/Product/ProductList.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport ProductCard from './ProductCard';\r\nimport ProductSkeleton from './ProductSkeleton';\r\nimport Pagination from '../Common/Pagination';\r\nimport productService from '../../services/productService';\r\nimport toast from 'react-hot-toast';\r\n\r\nconst ProductList = ({ \r\n  title = \"Sản phẩm\", \r\n  filters = {}, \r\n  showFilters = true,\r\n  itemsPerPage = 20 \r\n}) => {\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n  const [sortBy, setSortBy] = useState('');\r\n\r\n  useEffect(() => {\r\n    fetchProducts();\r\n  }, [filters, currentPage, sortBy]);\r\n\r\n  const fetchProducts = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const params = {\r\n        ...filters,\r\n        page: currentPage,\r\n        page_size: itemsPerPage,\r\n        ordering: sortBy\r\n      };\r\n\r\n      const response = await productService.getProducts(params);\r\n      \r\n      if (response.success) {\r\n        setProducts(response.data.results || response.data);\r\n        setTotalPages(Math.ceil((response.data.count || response.data.length) / itemsPerPage));\r\n      }\r\n    } catch (error) {\r\n      toast.error('Không thể tải danh sách sản phẩm');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSortChange = (newSort) => {\r\n    setSortBy(newSort);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4\">\r\n        {[...Array(itemsPerPage)].map((_, index) => (\r\n          <ProductSkeleton key={index} />\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {/* Header */}\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <h2 className=\"text-xl font-semibold text-gray-800\">{title}</h2>\r\n        \r\n        {showFilters && (\r\n          <div className=\"flex items-center space-x-4\">\r\n            <span className=\"text-sm text-gray-600\">Sắp xếp theo:</span>\r\n            <select\r\n              value={sortBy}\r\n              onChange={(e) => handleSortChange(e.target.value)}\r\n              className=\"border border-gray-300 rounded px-3 py-1 text-sm\"\r\n            >\r\n              <option value=\"\">Liên quan</option>\r\n              <option value=\"-created_at\">Mới nhất</option>\r\n              <option value=\"price\">Giá thấp đến cao</option>\r\n              <option value=\"-price\">Giá cao đến thấp</option>\r\n              <option value=\"-rating\">Đánh giá cao nhất</option>\r\n              <option value=\"-sold_count\">Bán chạy nhất</option>\r\n            </select>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Products Grid */}\r\n      {products.length > 0 ? (\r\n        <>\r\n          <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4 mb-8\">\r\n            {products.map((product) => (\r\n              <ProductCard key={product.id} product={product} />\r\n            ))}\r\n          </div>\r\n\r\n          {/* Pagination */}\r\n          {totalPages > 1 && (\r\n            <Pagination\r\n              currentPage={currentPage}\r\n              totalPages={totalPages}\r\n              onPageChange={setCurrentPage}\r\n            />\r\n          )}\r\n        </>\r\n      ) : (\r\n        <div className=\"text-center py-12\">\r\n          <div className=\"text-gray-400 text-lg mb-2\">Không tìm thấy sản phẩm nào</div>\r\n          <div className=\"text-gray-500 text-sm\">Thử thay đổi bộ lọc hoặc từ khóa tìm kiếm</div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}